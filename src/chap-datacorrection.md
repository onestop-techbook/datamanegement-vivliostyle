---
class: chapter
---

# 誤り検出・誤り訂正の基礎

デジタルデータは、通信中のノイズや記録媒体の劣化によって容易にビット反転を起こします。1ビットの誤りでも、プログラムやファイルが破損することがあります。そこで必要となるのが **誤り検出（Error Detection）** と **誤り訂正（Error Correction）** の技術です。これらは、データ通信・ストレージ・光ディスク・無線通信・QRコードなど、あらゆるデジタルシステムの基盤技術として用いられています。

## 誤り検出とは何か

誤り検出は、データが伝送中に壊れていないかを確認する仕組みです。データそのものとは別に、**検査用の付加情報（チェック値）**を送ることで、受信側が「途中で誤りが発生したかどうか」を判断できます。ただし、誤りの位置や内容までは分からず、訂正までは行いません。

代表的な誤り検出技術には、次のものがあります。

### パリティビット

データ中の1の数が偶数または奇数になるように、1ビットのパリティを付加します。

* 偶数パリティ：全体の1の数を「偶数」にする
* 奇数パリティ：全体の1の数を「奇数」にする

1ビットの誤りは検出できますが、2ビット以上の誤りは検出できないことがあります。古い通信方式やメモリ（ECCなし）で利用されていました。

偶数パリティの時は、一かたまり（例えば8ビット）のデータ列の1の数が偶数になるように、最後にパリティビットを付加します。

'''
10010011　元データ：1が4個
100100110　偶数パリティを付加
100100100　偶数パリティなのに1が3個＝どこかでビット反転が生じていることがわかる。
100110100　2ビット反転するとわからない。
'''

###  チェックサム（Checksum）

データの各バイトを加算した値を送る方法です。IPパケットやファイル転送プロトコルで広く使われます。

* 計算が軽い
* 単純な誤りに強い

しかし、計算方法が簡易なため、複雑な誤りには弱いという欠点があります。

### CRC（巡回冗長検査）

CRC（Cyclic Redundancy Check）は、ポリノミアル演算を用いてチェック値を生成します。通信規格、ストレージ、画像フォーマットなどで最も広く利用される方式です。

特徴は以下の通りです。

* 多くの誤りパターンを高い確率で検出
* 高速で計算可能
* ネットワークやUSB、ハードディスクなどで標準的

CRCは「強い誤り検出」を低コストで実現する技術として不可欠です。

---

## 誤り訂正

誤り訂正は、誤りを検出するだけでなく、**どのビットが間違っているかを判断して修正する**技術です。

このために、データに多くの冗長ビットを付与し、誤り発生後でも元のデータを復元できるようにします。

代表的な誤り訂正技術として次のものがあります。

---


###  ハミング符号（Hamming Code）

最も基本的な誤り訂正符号の一つです。

* 1ビットの誤りを訂正できる
* 2ビットの誤りを検出できる
* コンピュータメモリ（ECCメモリ）などで使用

ハミング符号は誤りビットの位置を特定するために、複数のチェックビットをデータの特定位置に挿入します。検査結果のビットパターン（シンドローム）から誤りの位置を直接求められる点が特徴です。

---

### リード・ソロモン符号（Reed–Solomon Code）

CD、DVD、QRコードなどで広く使用されている強力な誤り訂正方式です。

* 「連続した破損」に強い
* 複数バイトの誤りを訂正可能
* 大容量メディアに適する

特にQRコードでは、30%まで欠損しても読み取れるよう、リード・ソロモン符号が組み込まれています。

---

###  BCH符号

リード・ソロモンと同様、多ビット誤り訂正が可能な符号。
フラッシュメモリやSSDのコントローラ内部で使用されています。

---

### LDPC符号（Low-Density Parity-Check Code）

近年の高速通信（Wi-Fi、衛星通信、5Gなど）で主流の符号です。

* 高い訂正能力
* 反復復号による柔軟な性能調整
* 大規模データの訂正に向く

特に高信頼・高速通信に強く、現代の通信規格には欠かせない方式です。

---

## 4. 誤り検出と訂正の関係

誤り検出と誤り訂正には次の違いがあります。

| 項目       | 誤り検出              | 誤り訂正           |
| -------- | ----------------- | -------------- |
| 目的       | 誤りの発生を知らせる        | 誤りを修復する        |
| 必要な冗長ビット | 少ない               | 多い             |
| 典型例      | CRC, チェックサム, パリティ | ハミング, RS, LDPC |
| 信頼性      | 中程度               | 高い             |

通信システムでは、

1. まず誤りを検出（CRCなど）
2. 必要に応じて再送要求（ARQ: Automatic Repeat reQuest）
3. それでも足りない場合に訂正符号を併用

といった組み合わせがよく使われます。


## 現代システムにおける活用

誤り検出・訂正技術は、身近なあらゆる機器で利用されています。

### ● ハードディスク・SSD

ECCにより、ビット反転を修復しながら読み書きしています。

### ● 無線通信（Wi-Fi、Bluetooth、携帯電話）

ノイズの多い環境でもデータを届けるため、強力な誤り訂正を併用します。

### ● QRコード

一部が欠けても読み取れるのは、リード・ソロモン符号のおかげです。

### ● インターネット通信

パケット損失時に再送を行うため、誤り検出（CRC）が重要です。

## まとめ

誤り検出・誤り訂正は、デジタル通信やデータ保存を支える土台です。

* 誤り検出は「誤りが起きたことを見つける」技術
* 誤り訂正は「誤りを修復する」技術
* 訂正を強くするほど冗長データが増え、圧縮とのトレードオフが発生する
* 現代の通信方式は、高度な誤り訂正符号により信頼性と速度を両立している
